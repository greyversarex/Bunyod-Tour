<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель - Bunyod-Tour</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/axios@1.6.0/dist/axios.min.js"></script>
    <script src="https://unpkg.com/react-router-dom@6/dist/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/i18next@23/dist/umd/i18next.min.js"></script>
    <script src="https://unpkg.com/react-i18next@13/dist/umd/react-i18next.min.js"></script>
    <script src="https://unpkg.com/i18next-browser-languagedetector@7/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
    <style>
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Noto Sans', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif; 
        }
    </style>
</head>
<body>
    <div id="admin-root"></div>

    <!-- Include types -->
    <script type="text/babel" src="src/types.js"></script>
    
    <!-- Include components -->
    <script type="text/babel" src="src/components/AdminDashboard.tsx"></script>
    <script type="text/babel" src="src/components/TourForm.tsx"></script>
    <script type="text/babel" src="src/components/BookingsTable.tsx"></script>
    <script type="text/babel" src="src/components/ReviewsTable.tsx"></script>
    <script type="text/babel" src="src/components/BookingDetailsModal.tsx"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { BrowserRouter, Routes, Route, Navigate } = ReactRouterDOM;

        // Initialize i18next
        i18next
            .use(i18nextBrowserLanguageDetector)
            .init({
                fallbackLng: 'ru',
                debug: true,
                resources: {
                    en: {
                        translation: {
                            // Add your English translations here
                        }
                    },
                    ru: {
                        translation: {
                            // Add your Russian translations here
                        }
                    }
                }
            });

        // Simple Login Component
        function LoginForm({ onLogin }) {
            const [credentials, setCredentials] = useState({ username: '', password: '' });
            
            const handleSubmit = (e) => {
                e.preventDefault();
                // Simple authentication - in production, this should be server-side
                if (credentials.username === 'admin' && credentials.password === 'admin123') {
                    onLogin();
                } else {
                    alert('Неверные учетные данные');
                }
            };

            return (
                <div className="min-h-screen bg-gray-50 flex items-center justify-center">
                    <div className="max-w-md w-full space-y-8">
                        <div>
                            <h2 className="mt-6 text-center text-3xl font-extrabold text-gray-900">
                                Вход в админ-панель
                            </h2>
                        </div>
                        <form className="mt-8 space-y-6" onSubmit={handleSubmit}>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">
                                    Имя пользователя
                                </label>
                                <input
                                    type="text"
                                    value={credentials.username}
                                    onChange={(e) => setCredentials({...credentials, username: e.target.value})}
                                    className="mt-1 block w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">
                                    Пароль
                                </label>
                                <input
                                    type="password"
                                    value={credentials.password}
                                    onChange={(e) => setCredentials({...credentials, password: e.target.value})}
                                    className="mt-1 block w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    required
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg"
                            >
                                Войти
                            </button>
                            <div className="text-sm text-gray-500 text-center">
                                Тестовые данные: admin / admin123
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Main Admin App
        function AdminApp() {
            const [isAuthenticated, setIsAuthenticated] = useState(false);

            useEffect(() => {
                // Check if user is already logged in
                const authStatus = localStorage.getItem('adminAuth');
                if (authStatus === 'true') {
                    setIsAuthenticated(true);
                }
            }, []);

            const handleLogin = () => {
                setIsAuthenticated(true);
                localStorage.setItem('adminAuth', 'true');
            };

            const handleLogout = () => {
                setIsAuthenticated(false);
                localStorage.removeItem('adminAuth');
            };

            if (!isAuthenticated) {
                return <LoginForm onLogin={handleLogin} />;
            }

            return (
                <BrowserRouter>
                    <ReactI18next.I18nextProvider i18n={i18next}>
                        <div className="min-h-screen bg-gray-50">
                            <AdminDashboard onLogout={handleLogout} />
                        </div>
                    </ReactI18next.I18nextProvider>
                </BrowserRouter>
            );
        }

        // Render the app
        ReactDOM.render(<AdminApp />, document.getElementById('admin-root'));
    </script>
</body>
</html>